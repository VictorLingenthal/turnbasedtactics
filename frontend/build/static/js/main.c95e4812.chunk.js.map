{"version":3,"sources":["gamelogic/game.js","gamelogic/liveUnit.js","gamelogic/player.js","gamelogic/unitModels.js","gamelogic/abilities.js","services/cookieService.ts","services/apolloClient.ts","services/userService.ts","components/auth.tsx","model/routeStates.model.ts","components/menu.tsx","components/unit.tsx","services/displayedGameService.ts","components/game.tsx","services/clientgameService.ts","services/gameListService.ts","components/gameList.tsx","App.tsx","reportWebVitals.ts","index.tsx","model/abilityTargets.model.js","services/gameService.js","model/gameStates.model.js"],"names":["__spreadArrays","this","s","i","il","arguments","length","r","Array","k","a","j","jl","Object","defineProperty","exports","value","Game","liveUnit_1","require","args","_this","initializeGame","players","map","player","units","initializeUnits","_a","playerUnits","unitModels","unitModel","idx","GameUnit","insertUnits","unit","id","filterDeadUnits","filter","life","applyAbility","applyingUnit","unitAbility","receivingUnit","receivingUnits","currentTurnTimeout","targets","updatedUnits","ability","apply","changeTurn","getUnitsByPlayer","checkForWinner","winner","gameService","endGame","changeTurnTimeouts","switchToNextPlayer","turn","currentPlayer","players_left","idxCurrentPlayerInc","indexOf","idxNextPlayer","players_to_remove","remaining_players","push","name","getWinner","maxlife","abilities","Player","unitModels_1","playerSetup","username","userID","Knight","Witch","Healer","alive","abilities_1","data","Attack","damage","turnTimeout","Heal","Burn","__assign","assign","t","n","p","prototype","hasOwnProperty","call","abilityTargets_model_1","Math","min","AbilityTargetsEnum","ENEMY","ALLY","CookieNameEnum","httpLink","HttpLink","uri","wsLink","WebSocketLink","document","location","protocol","host","options","reconnect","splitLink","split","query","definition","getMainDefinition","kind","operation","apolloClient","ApolloClient","link","cache","InMemoryCache","cookieService","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","cookie","ca","decodeURIComponent","c","charAt","substring","UserService","sessionID","SESSIONID","mutate","variables","mutation","gql","then","res","checkAuth","catch","err","console","log","login","loginData","password","confirmPassword","register","instance","Auth","props","userService","getInstance","useState","awaitResponse","setAwaitResponse","showRegister","setShowRegister","message","loginMessage","setLoginMessage","useEffect","setLoginData","onInputChange","e","target","className","onClick","onSubmit","preventDefault","type","onChange","routeStates","Menu","routeState","route","setRoute","Unit","selectedUnit","setSelectedUnit","selectedAbilty","setSelectedAbilty","executeAbility","dispatchAbility","game","u","DisplayedGameService","displayedGameService","setDisplayedGameService","getDisplayedGameService","rerender","setRerender","rerenderView","selectedUnitState","selectedAbilityState","setSelectedAbility","reverse","ClientGameService","gameID","applyingUnitID","createUnitID","unitAbilityName","receivingUnitID","receivingUnitIDs","setUpSubscription","self","subscribe","next","obj","sendTurn","callApplyAbility","GameService","GameListService","activeGames","subscription","setGameList","getGameList","getGameListQuery","gameListSubscription","gameList","openGame","joinGame","gameStub","returnedGameData","updateGameList","startNewGame","startGame","filteredGames","newGameList","gameName","gameState","newClientGameService","GameList","gameListService","GameStateEnum","OPEN","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","game_1","player_1","initPlayers","playerstub","checkCurrentPlayerByID","getUnitbyUnitID","unitID","gameServiceObserver"],"mappings":"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","file":"static/js/main.c95e4812.chunk.js","sourcesContent":["\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Game = void 0;\nvar liveUnit_1 = require(\"./liveUnit\");\nvar Game = /** @class */ (function () {\n    function Game(args) {\n        var _this = this;\n        this.initializeGame = function () {\n            return _this.players.map(function (player) { return player.units = _this.initializeUnits(player); });\n        };\n        this.initializeUnits = function (player) {\n            var _a;\n            var playerUnits = (_a = player.unitModels) === null || _a === void 0 ? void 0 : _a.map(function (unitModel, idx) { return new liveUnit_1.GameUnit(idx, player, unitModel); });\n            if (playerUnits) {\n                _this.units = __spreadArrays(_this.units, playerUnits);\n                return playerUnits;\n            }\n            else\n                return _this.units;\n        };\n        this.insertUnits = function (units) {\n            for (var i in units)\n                _this.units = _this.units.map(function (unit) { return (units[i].id === unit.id && units[i].player.id === unit.player.id) ? units[i] : unit; });\n        };\n        this.filterDeadUnits = function (units) {\n            return units.filter(function (unit) { return unit.life != 0; });\n        };\n        this.applyAbility = function (applyingUnit, unitAbility, receivingUnit, receivingUnits) {\n            if (applyingUnit.currentTurnTimeout > 0 ||\n                applyingUnit.life < 1)\n                return false;\n            switch (unitAbility.targets[0]) {\n                case 'Clicked': {\n                    var updatedUnits = unitAbility.ability.apply(applyingUnit, unitAbility, _this.filterDeadUnits([receivingUnit]));\n                    _this.insertUnits(updatedUnits);\n                    _this.changeTurn();\n                    return true;\n                }\n                case 'All_by_Player': {\n                    var updatedUnits = unitAbility.ability.apply(applyingUnit, unitAbility, _this.filterDeadUnits(receivingUnits));\n                    _this.insertUnits(updatedUnits);\n                    _this.changeTurn();\n                    return true;\n                }\n                case 'All_by_Enemy': {\n                    var updatedUnits = unitAbility.ability.apply(applyingUnit, unitAbility, _this.filterDeadUnits(receivingUnits));\n                    _this.insertUnits(updatedUnits);\n                    _this.changeTurn();\n                    return true;\n                }\n                default: {\n                    _this.changeTurn();\n                    return true;\n                }\n            }\n        };\n        this.getUnitsByPlayer = function (player) {\n            return _this.units.filter(function (unit) { return unit.player === player; });\n        };\n        this.changeTurn = function () {\n            var _a;\n            if (_this.checkForWinner()) {\n                if (_this.winner)\n                    (_a = _this.gameService) === null || _a === void 0 ? void 0 : _a.endGame(_this.winner);\n            }\n            else {\n                _this.changeTurnTimeouts();\n                _this.switchToNextPlayer();\n                _this.turn++;\n            }\n        };\n        this.changeTurnTimeouts = function () {\n            return _this.getUnitsByPlayer(_this.currentPlayer).map(function (unit) {\n                return unit.currentTurnTimeout > 0 ? unit.currentTurnTimeout-- : unit;\n            });\n        };\n        this.switchToNextPlayer = function () {\n            var players_left = _this.players.length;\n            var idxCurrentPlayerInc = _this.players.indexOf(_this.currentPlayer) + 1;\n            var idxNextPlayer = players_left === idxCurrentPlayerInc ? 0 : idxCurrentPlayerInc;\n            _this.currentPlayer = _this.players[idxNextPlayer];\n        };\n        this.checkForWinner = function () {\n            var players_to_remove = [];\n            for (var i in _this.remaining_players) {\n                var remainingUnits = _this.units.filter(function (unit) {\n                    return unit.life > 0 &&\n                        unit.player.id === _this.remaining_players[i].id;\n                }).length;\n                if (remainingUnits === 0)\n                    players_to_remove.push(_this.remaining_players[i]);\n            }\n            for (var i in players_to_remove)\n                _this.remaining_players = _this.remaining_players.filter(function (player) { return player.name != players_to_remove[i].name; });\n            if (_this.remaining_players.length === 1) {\n                _this.winner = _this.remaining_players[0];\n                return true;\n            }\n            return false;\n        };\n        this.getWinner = function () { return _this.winner; };\n        this.gameService = args.gameService;\n        this.players = args.players;\n        this.remaining_players = this.players;\n        this.turn = args.turn || 0;\n        this.currentPlayer = args.currentPlayer || args.players[0];\n        this.units = [];\n        this.winner = null;\n        this.initializeGame();\n    }\n    return Game;\n}());\nexports.Game = Game;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GameUnit = void 0;\nvar GameUnit = /** @class */ (function () {\n    function GameUnit(id, player, unitModel) {\n        this.id = id;\n        this.player = player;\n        this.name = unitModel.name;\n        this.life = unitModel.maxlife;\n        this.currentTurnTimeout = 0;\n        this.maxlife = unitModel.maxlife;\n        this.abilities = unitModel.abilities;\n    }\n    return GameUnit;\n}());\nexports.GameUnit = GameUnit;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Player = void 0;\nvar unitModels_1 = require(\"./unitModels\");\nvar Player = /** @class */ (function () {\n    function Player(playerSetup, id) {\n        this.name = playerSetup.username;\n        this.id = id;\n        this.userID = playerSetup.userID;\n        this.unitModels = [unitModels_1.Knight, unitModels_1.Witch, unitModels_1.Healer];\n        // this.unitModels = [Knight]\n        this.units = [];\n        this.alive = true;\n    }\n    return Player;\n}());\nexports.Player = Player;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Witch = exports.Healer = exports.Knight = exports.GameUnit = void 0;\nvar abilities_1 = require(\"./abilities\");\nvar GameUnit = /** @class */ (function () {\n    function GameUnit(data) {\n        this.name = data.name;\n        this.maxlife = data.maxlife;\n        this.abilities = data.abilities;\n    }\n    return GameUnit;\n}());\nexports.GameUnit = GameUnit;\nexports.Knight = {\n    name: 'Knight',\n    maxlife: 40,\n    abilities: [{\n            name: abilities_1.Attack.name,\n            damage: 12,\n            turnTimeout: 1,\n            targets: ['Clicked'],\n            ability: abilities_1.Attack\n        }]\n};\nexports.Healer = {\n    name: 'Healer',\n    maxlife: 20,\n    abilities: [{\n            name: abilities_1.Heal.name,\n            damage: -6,\n            targets: ['All_by_Player'],\n            turnTimeout: 3,\n            ability: abilities_1.Heal\n        }]\n};\nexports.Witch = {\n    name: 'Witch',\n    maxlife: 20,\n    abilities: [{\n            name: abilities_1.Burn.name,\n            damage: 10,\n            turnTimeout: 4,\n            targets: ['All_by_Enemy'],\n            ability: abilities_1.Burn\n        }]\n};\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Burn = exports.Heal = exports.Attack = void 0;\nvar abilityTargets_model_1 = require(\"../model/abilityTargets.model\");\nvar apply = function (applyingUnit, unitAbility, receivingUnits) {\n    applyingUnit.currentTurnTimeout = unitAbility.turnTimeout;\n    return receivingUnits.map(function (unit) { return (__assign(__assign({}, unit), { life: Math.min(unit.maxlife, unit.life - unitAbility.damage) })); });\n};\nexports.Attack = {\n    name: 'Attack',\n    targets: [abilityTargets_model_1.AbilityTargetsEnum.ENEMY],\n    apply: apply\n};\nexports.Heal = {\n    name: 'Heal',\n    targets: [abilityTargets_model_1.AbilityTargetsEnum.ALLY],\n    apply: apply\n};\nexports.Burn = {\n    name: 'Burn',\n    targets: [abilityTargets_model_1.AbilityTargetsEnum.ENEMY],\n    apply: apply\n};\n","\nexport enum CookieNameEnum {\n  SESSIONID = \"SESSIONID\",\n}\n\nexport const cookieService = {\n\n  setCookie: (cname, cvalue, exdays) => {\n    var d = new Date();\n    d.setTime(d.getTime() + (exdays*24*60*60*1000));\n    var expires = \"expires=\"+ d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n  },\n\n  // setAuthCookie: (type:CookieNameEnum,value) => {\n  //   var d = new Date();\n  //   d.setTime(d.getTime() + (24*60*60*1000));\n  //   var expires = \"expires=\"+ d.toUTCString();\n  //   document.cookie = \"ID=\" + id + \";\" + expires + \";path=/\";\n  // },\n\n  getCookie: (cname:CookieNameEnum) => {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n    for(var i = 0; i <ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n    return \"\";\n  },\n\n}\n","\nimport { ApolloClient, InMemoryCache, HttpLink, split, gql } from '@apollo/client';\nimport { WebSocketLink } from '@apollo/client/link/ws';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst httpLink = new HttpLink({\n  uri: 'http://localhost:4444/graphql'\n  // uri: 'http://' + document.location.host + '/graphql'\n});\n\nconst wsLink = new WebSocketLink({\n  // uri: 'ws://localhost:4444/graphql',\n  // uri: 'ws://' + document.location.host + '/graphql',\n  uri: (document.location.protocol === 'https:' ? 'wss' : 'ws') + '://' + document.location.host + '/graphql',\n  options: {\n    reconnect: true\n  }\n});\n\n// The split function takes three parameters:\n//\n// * A function that's called for each operation to execute\n// * The Link to use for an operation if the function returns a \"truthy\" value\n// * The Link to use for an operation if the function returns a \"falsy\" value\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    );\n  },\n  wsLink,\n  httpLink,\n);\n\n// Instantiate client\nexport const apolloClient = new ApolloClient({\n  link: splitLink,\n  uri: \"http://localhost:4444/graphql\",\n  // uri: \"http://\" + document.location.host+ \"/graphql\",\n  // uri: \"/graphql\",\n  cache: new InMemoryCache()\n})\n","\nimport { gql } from '@apollo/client';\nimport { apolloClient } from './apolloClient'\nimport { cookieService, CookieNameEnum } from './cookieService'\n\nexport interface ILoginData {\n  username:string\n  password:string\n  confirmPassword:string\n}\n\nexport interface IUserService {\n  userID:string\n  sessionID:string\n  login(loginData:ILoginData):Promise<any>\n  register(loginData:ILoginData):Promise<any>\n  checkAuth():Promise<any>\n}\n\nexport class UserService implements IUserService {\n\n  public userID:string\n  public sessionID:string\n  private static instance: IUserService\n\n  private constructor () {\n    this.sessionID = cookieService.getCookie(CookieNameEnum.SESSIONID)\n  }\n\n  public static getInstance(): IUserService {\n    if (!UserService.instance)\n      UserService.instance = new UserService()\n\n    return UserService.instance\n  }\n\n  public async checkAuth() {\n    return await apolloClient.mutate({\n      variables: {\n        sessionID: this.sessionID,\n      },\n      mutation: gql`\n        mutation CheckAuth(\n          $sessionID: String\n        ) {\n          checkAuth(\n            sessionID: $sessionID\n          ) {\n            userID\n            message\n          }\n        }\n      `\n    })\n    .then(res => {\n      this.userID = res.data.checkAuth.userID\n      return res.data\n    })\n    .catch(err => {\n      console.log('checkAuth Error')\n      console.log(err)\n      console.log(err.data?.login)\n      return err.data\n    })\n  }\n\n  public async login(loginData) {\n    return await apolloClient.mutate({\n      variables: {\n        username: loginData.username,\n        password: loginData.password,\n      },\n      mutation: gql`\n        mutation Login(\n          $username: String\n          $password: String\n        ) {\n          login(\n            username: $username\n            password: $password\n          ) {\n            userID\n            sessionID\n            message\n          }\n        }\n      `\n    })\n    .then(res => {\n      this.userID = res.data.login.userID\n      this.sessionID = res.data.login.sessionID\n      return res.data\n    })\n    .catch(err => {\n      console.log('Login Error')\n      console.log(err)\n      console.log(err.data.login)\n      return err.data\n    })\n  }\n\n  public async register(loginData) {\n    return apolloClient.mutate({\n      variables: {\n        username: loginData.username,\n        password:loginData.password,\n        confirmPassword:loginData.confirmPassword,\n      },\n      mutation: gql`\n        mutation Register(\n          $username: String\n          $password: String\n          $confirmPassword: String\n        ) {\n          register(\n            username: $username\n            password: $password\n            confirmPassword: $confirmPassword\n          ) {\n            userID\n            sessionID\n            message\n          }\n        }\n      `\n    })\n    .then(res => {\n      this.userID = res.data.register.userID\n      this.sessionID = res.data.register.sessionID\n      return res.data\n    })\n    .catch(err => {\n      console.log('Register Error')\n      console.log(err)\n      console.log(err.data.login)\n      return err.data\n    })\n  }\n\n}\n","import { FC, useState, useEffect} from 'react'\n\nimport './scss/auth.scss'\nimport { UserService } from \"../services/userService\"\nimport { cookieService, CookieNameEnum } from \"../services/cookieService\"\nimport { IloginResult } from '../interfaces/loginResult'\n\nlet Auth: FC<{\n\n}> = (props) => {\n\n  const userService = UserService.getInstance()\n\n  const [awaitResponse, setAwaitResponse] = useState<Boolean>(false)\n\n  const [showRegister, setShowRegister] = useState<Boolean>(false)\n  const [loginMessage, setLoginMessage] = useState<IloginResult>({\n    userID: null,\n    sessionID: null,\n    message: \"\",\n  })\n\n  useEffect(() => {\n    const userID = userService.userID\n    const sessionID = userService.sessionID\n    userService.checkAuth()\n    .then(res =>  {\n      if (res.checkAuth.userID) {\n        setLoginMessage({\n          userID,\n          sessionID,\n          message: res.checkAuth.message,\n        })\n      }\n    })\n    .catch(err => {\n      console.log('checkAuth Error')\n      console.log(err.login)\n    })\n  },[])\n\n  const [loginData, setLoginData] = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  })\n\n  const { username, password, confirmPassword } = loginData\n\n  const onInputChange = (e) => {\n    setLoginData({\n      ...loginData,\n      [e.target.name]: e.target.value\n    })\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n    if (awaitResponse) {\n      setLoginMessage({\n        ...loginMessage,\n        message: \"Waiting for Server\",\n      })\n      return\n    }\n    setAwaitResponse(true)\n    if (!showRegister) {\n      userService.login(loginData)\n      .then(res =>  {\n        setAwaitResponse(false)\n        cookieService.setCookie(CookieNameEnum.SESSIONID, res.login.sessionID, 1)\n        setLoginMessage(res.login)\n      })\n      .catch(err => {\n        setAwaitResponse(false)\n        console.log('loginResult Error')\n        console.log(err.login)\n      })\n    } else {\n      userService.register(loginData)\n      .then(res => {\n        setAwaitResponse(false)\n        cookieService.setCookie(CookieNameEnum.SESSIONID, res.register.sessionID, 1)\n        setLoginMessage(res.register)\n      })\n      .catch(err => {\n        setAwaitResponse(false)\n        console.log('registerResult Error')\n        console.log(err.register)\n      })\n    }\n\n  }\n\n  const onClickRegister = (e) =>\n    setShowRegister(true)\n\n  const onClickLogin = (e) =>\n    setShowRegister(false)\n\n  return (\n    <div className=\"auth\">\n      <div className=\"user\">\n      { !loginMessage.sessionID &&\n        <div>\n          <div className=\"authlinks\">\n            <span\n              className=\"authlink\"\n              onClick={onClickLogin}\n            >Login</span>\n            <span> / </span>\n            <span\n              className=\"authlink\"\n              onClick={onClickRegister}\n            >Register</span>\n          </div>\n\n          <form onSubmit={onSubmit}>\n            <label>Username</label>\n            <input\n              name=\"username\"\n              type=\"text\"\n              value={username}\n              onChange={onInputChange}\n            />\n            <label>Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={password}\n              onChange={onInputChange}\n            />\n            {\n              showRegister &&\n              <div>\n                <label>Confirm Password</label>\n                <input\n                  type=\"password\"\n                  name=\"confirmPassword\"\n                  value={confirmPassword}\n                  onChange={onInputChange}\n                />\n              </div>\n            }\n            <button type=\"submit\">Submit</button>\n          </form>\n        </div>\n      }\n        <div\n          className={loginMessage.sessionID ? \"loginMessage success\" : \"loginMessage failure\"}\n        >{loginMessage.message}</div>\n      </div>\n    </div>\n  )\n}\n\n\nexport default Auth\n","\nexport const routeStates = {\n  GAMELIST: 'gameList',\n  GAME: 'game',\n};\n","\nimport { FC, useState } from 'react'\n\nimport './scss/menu.scss'\nimport Auth from './auth'\nimport { routeStates } from '../model/routeStates.model'\n\nlet Menu: FC<{\n  routeState:[String,Function]\n}> = (props) => {\n\n  let [route, setRoute] = props.routeState\n\n  return (\n    <div className=\"menu\">\n\n      <Auth />\n\n      <ul className=\"menulist\">\n        <li onClick={e => setRoute(routeStates.GAMELIST)}>\n          GameList\n          {route === routeStates.GAMELIST && <span> &lt;-</span>}\n        </li>\n        <li onClick={e => setRoute(routeStates.GAME)}>\n          Game\n          {route === routeStates.GAME && <span> &lt;-</span>}\n        </li>\n      </ul>\n\n    </div>\n  )\n}\n\n\nexport default Menu\n","import { FC } from 'react'\n\nimport { IUnitAbility } from '../gamelogic/unitModels'\nimport { ILiveUnit } from '../gamelogic/liveUnit'\nimport { IGameService } from '../services/gameService'\nimport { UserService } from '../services/userService'\nimport { AbilityTargetsEnum } from '../model/abilityTargets.model'\nimport './scss/unit.scss'\n\nexport let Unit: FC<{\n  unit:ILiveUnit\n  gameService: IGameService\n  selectedAbilty:[IUnitAbility|null,Function]\n  selectedUnit:[ILiveUnit|null,Function]\n}> = (props) => {\n\n  const gameService = props.gameService\n\n  const unit = props.unit\n  const [selectedUnit, setSelectedUnit] = props.selectedUnit\n  const [selectedAbilty, setSelectedAbilty] = props.selectedAbilty\n\n  const executeAbility = () => {\n    console.log('executeAbility')\n    gameService.dispatchAbility(\n      selectedUnit,\n      selectedAbilty,\n      unit,\n      gameService.game.units.filter(u => u.player.name === unit.player.name)\n    )\n    setSelectedUnit(null)\n    setSelectedAbilty(null)\n  }\n\n  return (\n      <div\n        className={\"Unit\" + (selectedUnit === unit ? \" selectedUnit\": \"\")}\n        onClick={e => {\n            //Check whose turn it is\n            if (gameService.game.turn%2+1 === unit.player.id && UserService.getInstance().userID === unit.player.userID) {\n              if (selectedAbilty && selectedAbilty.ability.targets[0] === AbilityTargetsEnum.ALLY) {\n                executeAbility()\n              } else {\n                if (selectedUnit === null || unit.player.id === selectedUnit.player.id) {\n                  if (unit.currentTurnTimeout > 0) {\n                    console.log('This Unit is waiting')\n                  } else {\n                    setSelectedUnit((selectedUnit !== unit && unit.life > 0 ) ? unit : null)\n                    setSelectedAbilty(null)\n                  }\n                } else console.log('no ability selected')\n              }\n            } else {\n              if (selectedUnit) {\n                if (selectedAbilty && selectedAbilty.ability.targets[0] === AbilityTargetsEnum.ENEMY) {\n                  executeAbility()\n                } else console.log(\"Can't apply to enemy\")\n              } else console.log(\"It's not your unit\")\n            }\n          }\n        }>\n        <h4>{unit.name}</h4>\n        {/*}<h4>unitID: {unit.id}</h4> */}\n        <h6>{unit.life > 0 ? 'Alive' : 'Dead'}</h6>\n        <h6>{unit.player.name}</h6>\n        {/* }<h6>PlayerID: {unit.player.id}</h6> */}\n        <div>Life: <span>{unit.life > 0? unit.life : 0}</span></div>\n        { unit.currentTurnTimeout > 0 &&\n          <div>Wait<span>{unit.currentTurnTimeout}</span>Turns</div>\n        }\n\n      </div>\n  )\n}\n","\nimport { IClientGameService } from './clientGameService'\n\nexport interface IDisplayedGameService {\n  setDisplayedGameService(gameService:IClientGameService):void\n  getDisplayedGameService():IClientGameService\n}\n\nexport class DisplayedGameService implements IDisplayedGameService {\n\n  private static instance: DisplayedGameService\n  private displayedGameService: IClientGameService\n\n  public static getInstance():DisplayedGameService {\n    if (!DisplayedGameService.instance)\n      DisplayedGameService.instance = new DisplayedGameService()\n\n    return DisplayedGameService.instance\n  }\n\n  public setDisplayedGameService = (gameService:IClientGameService) =>\n    this.displayedGameService = gameService\n\n  public getDisplayedGameService = () =>\n    this.displayedGameService\n\n}\n","\nimport { FC, useState, useEffect, Dispatch, SetStateAction } from 'react'\n\nimport './scss/game.scss'\n\nimport { IUnitAbility } from '../gamelogic/unitModels'\nimport { Unit } from './unit'\nimport { DisplayedGameService } from '../services/displayedGameService'\nimport { routeStates } from '../model/routeStates.model'\n\nexport let Game: FC<{\n  setRoute: Dispatch<SetStateAction<String>>\n}> = (props) => {\n\n  const gameService = DisplayedGameService.getInstance().getDisplayedGameService()\n  const setRoute = props.setRoute\n\n  const [rerender, setRerender] = useState(0)\n  gameService.rerenderView = () => setRerender(rerender+1)\n  useEffect(() => {},[rerender])\n\n  const selectedUnitState = useState(null)\n  const [selectedUnit, setSelectedUnit] = selectedUnitState\n\n  const selectedAbilityState = useState<IUnitAbility|null>(null)\n  const [selectedAbilty, setSelectedAbility] = selectedAbilityState\n\n  return (\n    <div className=\"Game\">\n      <div className=\"Timer\">\n        Timer: Todo\n      </div>\n      <div className=\"Turn\">\n\n        {gameService.game.winner &&\n          <div>\n            <span>The Game as Ended - The Winner is {gameService.game.winner.name}</span>\n            <button onClick={(e) =>\n              setRoute(routeStates.GAMELIST)\n            }>Leave Game</button>\n          </div>\n        }\n\n        <span>Turn: {gameService.game.turn}</span>\n        {!gameService.game.winner && <span> - CurrentPlayer: {gameService.game.turn%2+1} {gameService.game.currentPlayer.name}</span>}\n\n      </div>\n      <div className=\"Battle\">\n        {\n          gameService.game.units.filter(unit => unit.player.name == gameService.game.players[0].name).reverse().map((unit) =>\n            <Unit\n              key={unit.id}\n              unit={unit}\n              gameService={gameService}\n              selectedAbilty={selectedAbilityState}\n              selectedUnit={selectedUnitState}\n            />\n          )\n        }\n        <div className=\"Divider\">vs</div>\n        {\n          gameService.game.units.filter(unit => unit.player.name == gameService.game.players[1].name).map((unit) =>\n            <Unit\n              key={unit.id}\n              unit={unit}\n              gameService={gameService}\n              selectedAbilty={selectedAbilityState}\n              selectedUnit={selectedUnitState}\n            />\n          )\n        }\n\n      </div>\n\n      <div className=\"Controls\">\n        {\n          selectedUnit?.abilities.map((ability:IUnitAbility) =>\n            <div className={\"Control\" + (selectedAbilty === ability ? ' selected' : '')}\n              onClick={e => {\n                setSelectedAbility(ability)\n              }}\n            >\n            <span>{ability.ability.name}: {ability.damage}</span>\n            {\n              ability.turnTimeout > 1 &&\n              <span>Timeout: {ability.turnTimeout-1}</span>\n            }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n","\nimport { GameService, IGameService, UnitID } from './gameService'\nimport{ UserService } from './userService'\n\nimport { gql } from '@apollo/client';\nimport { apolloClient } from './apolloClient'\n\nimport { ILiveUnit } from '../gamelogic/liveUnit'\nimport { IUnitAbility} from '../gamelogic/unitModels'\n\nexport interface IClientGameService extends IGameService {\n  rerenderView: Function\n}\n\nexport class ClientGameService extends GameService implements IClientGameService {\n\n  public rerenderView: Function\n\n  constructor (args) {\n    super(args)\n    this.setUpSubscription()\n    this.rerenderView = () => {console.log('rerenderView() not Set')}\n  }\n\n  public dispatchAbility = (applyingUnit:ILiveUnit, unitAbility:IUnitAbility, receivingUnit:ILiveUnit, receivingUnits:ILiveUnit[]):void => {\n    apolloClient.mutate({\n      variables: {\n        gameID: this.gameID,\n        userID: UserService.getInstance().userID,\n        applyingUnitID: this.createUnitID(applyingUnit),\n        unitAbilityName: unitAbility.ability.name,\n        receivingUnitID: this.createUnitID(receivingUnit),\n        receivingUnitIDs: receivingUnits.map(unit => this.createUnitID(unit))\n      },\n      mutation: gql`\n        mutation ApplyAbility(\n          $gameID: ID,\n          $userID: ID,\n          $applyingUnitID: [ID],\n          $unitAbilityName: String,\n          $receivingUnitID: [ID],\n          $receivingUnitIDs: [[ID]]\n        ) {\n          applyAbility(\n            gameID: $gameID,\n            userID: $userID,\n            applyingUnitID: $applyingUnitID,\n            unitAbilityName: $unitAbilityName,\n            receivingUnitID: $receivingUnitID,\n            receivingUnitIDs: $receivingUnitIDs\n          )\n        }\n      `\n    })\n    // TBD Later\n    // .then(res => console.log(res))\n    .catch(err => console.log(err))\n  }\n\n  private setUpSubscription = () => {\n    const self = this\n    apolloClient.subscribe({\n      variables: {\n        gameID: this.gameID\n      },\n      query: gql`\n        subscription sendTurn ($gameID: ID) {\n          sendTurn (gameID: $gameID) {\n            applyingUnitID\n            unitAbilityName\n            receivingUnitID\n            receivingUnitIDs\n          }\n        }\n        `,\n    }).subscribe({\n      next (obj) {\n        const args = obj.data.sendTurn\n        self.callApplyAbility(\n          args.applyingUnitID,\n          args.unitAbilityName,\n          args.receivingUnitID,\n          args.receivingUnitIDs\n        )\n        self.rerenderView()\n      }\n    })\n  }\n\n\n}\n","\nimport { gql } from '@apollo/client';\nimport { apolloClient } from './apolloClient'\n\nimport { UserService } from './userService'\nimport { ClientGameService } from './clientgameService'\nimport { DisplayedGameService } from './displayedGameService'\nimport { routeStates } from '../model/routeStates.model'\n\nexport interface IPlayerStub {\n  username: String\n  userID: String\n}\n\nexport interface IGameStub {\n  gameName: String\n  gameState: String\n  gameID: String\n  players: IPlayerStub[]\n}\n\nexport interface IGameListService {\n  activeGames: IGameStub[]\n  getGameList(setGameList:Function, setRoute:Function):void\n  openGame(): void\n  joinGame(gameStub:IGameStub): void\n}\n\nexport class GameListService implements IGameListService {\n\n  private static instance: GameListService\n\n  public activeGames:IGameStub[]\n  private subscription\n  private setGameList\n\n  private constructor () {\n    const demogame = {\n      gameName: \"Demogame\",\n      gameID: \"DemoID - 1\",\n      gameState: 'Open',\n      players: [{\n        userID: \"Test\",\n        username: \"Testuser\",\n      }],\n    }\n\n    this.activeGames = [demogame]\n    // this.subscription = null\n  }\n\n  public static getInstance():GameListService {\n    if (!GameListService.instance)\n      GameListService.instance = new GameListService()\n\n    return GameListService.instance\n  }\n\n  public getGameList = (setGameList, setRoute) => {\n\n    this.setGameList = setGameList\n\n    if (!this.subscription) {\n      this.getGameListQuery()\n      console.log('getGameList - gameListSubscription')\n      this.subscription = this.gameListSubscription(setRoute)\n    }\n\n  }\n\n  private getGameListQuery = () =>\n    apolloClient.query({\n      query: gql`{\n        getGameList {\n          gameID\n          gameName\n          gameState\n          players {\n            userID\n            username\n          }\n        }\n      }`\n    })\n    .then(res => {\n      const gameList = res.data.getGameList\n      this.activeGames = gameList\n      this.setGameList(gameList)\n    })\n    .catch(err => {\n      console.log('getGameList - Error: ')\n      console.log(err)\n    })\n\n  public openGame = () =>\n    apolloClient.mutate({\n      variables: {\n        userID: UserService.getInstance().userID,\n      },\n      mutation: gql`\n        mutation OpenGame(\n          $userID: ID\n        ){\n          openGame(\n            userID: $userID\n          )\n        }\n      `,\n    })\n    .then(res => res)\n    .catch(err => {\n      console.log('openGame - Error:')\n      console.log(err)\n    })\n\n  public joinGame = (gameStub) =>\n    apolloClient.mutate({\n      variables: {\n        userID: UserService.getInstance().userID,\n        gameID: gameStub.gameID,\n      },\n      mutation: gql`\n        mutation JoinGame(\n          $userID: ID\n          $gameID: ID\n        ){\n          joinGame(\n            userID: $userID\n            gameID: $gameID\n          )\n        }\n      `,\n    })\n    .then(res => res)\n    .catch(err => {\n      console.log('joinGame - Error:')\n      console.log(err)\n    })\n\n  private gameListSubscription = (setRoute) => {\n    const self = this\n    return apolloClient.subscribe({\n      variables: {\n        userID: UserService.getInstance().userID\n      },\n      query: gql`\n        subscription onNewGame {\n          updateGameList {\n            startNewGame\n            gameName\n            gameID\n            gameState\n            players {\n              userID\n              username\n            }\n          }\n        }`,\n    }).subscribe({\n      next (obj) {\n\n        console.log('gameListSubscription')\n        const returnedGameData = obj.data.updateGameList\n        console.log(returnedGameData)\n\n        self.updateGameList(returnedGameData)\n\n        if (\n          returnedGameData.startNewGame &&\n          returnedGameData.players.length === 2 &&\n          returnedGameData.players.filter(player => player.userID === UserService.getInstance().userID).length != 0\n        ) self.startGame(returnedGameData, setRoute)\n\n      }\n    })\n  }\n\n  private updateGameList = (returnedGameData) => {\n    const filteredGames = this.activeGames.filter(game => game.gameID != returnedGameData.gameID)\n    const newGameList = [...filteredGames, {\n      gameID: returnedGameData.gameID,\n      gameName: returnedGameData.gameName,\n      gameState: returnedGameData.gameState,\n      players: returnedGameData.players,\n    }]\n\n    this.activeGames = newGameList\n    this.setGameList(newGameList)\n  }\n\n  private startGame = (game, setRoute) => {\n\n    const newClientGameService = new ClientGameService({\n      gameID: game.gameID,\n      players: game.players\n    })\n\n    DisplayedGameService.getInstance().setDisplayedGameService(newClientGameService)\n\n    setRoute(routeStates.GAME)\n  }\n\n}\n","\nimport { FC, useState, useEffect } from 'react'\n\nimport { GameListService, IGameStub } from '../services/gameListService'\nimport './scss/gameList.scss'\n\nimport { GameStateEnum } from '../model/gameStates.model'\n\nexport let GameList: FC<{\n  setRoute: Function\n}> = (props) => {\n\n  const gameListService = GameListService.getInstance()\n  const [gameList, setGameList] = useState<IGameStub[]>(gameListService.activeGames)\n\n  useEffect(() => {\n    gameListService.getGameList(setGameList, props.setRoute)\n  }, [])\n\n  return (\n    <div className=\"gameListComponent\">\n\n      <h1>Gamelist</h1>\n      <div className=\"openGame\">\n        <button onClick={e => gameListService.openGame()}>Open New Game</button>\n      </div>\n\n      <table className=\"gameList\">\n        <tr>\n          <th>Game Status</th>\n          <th>Game Name</th>\n          <th>No of Players</th>\n          <th>Players</th>\n        </tr>\n        {\n          gameListService.activeGames.map(game => (\n            <tr>\n              <td>{\n                game.gameState === GameStateEnum.OPEN &&\n                  <button\n                    onClick={e => gameListService.joinGame(game)}\n                  >Join</button>\n                  || game.gameState\n              }</td>\n              <td>{game.gameName}</td>\n              <td>{game.players.length}</td>\n              <td>{\n                game.players.map((player, idx) =>\n                  player.username +\n                  (game.players.length-1 === idx ? '' : ', ')\n                )}\n              </td>\n            </tr>\n            )\n        )}\n      </table>\n\n    </div>\n  )\n}\n","import { useState } from 'react';\n\nimport './App.scss';\nimport Menu from './components/menu'\nimport { Game } from './components/game'\nimport { GameList } from './components/gameList'\n\nimport { routeStates } from './model/routeStates.model'\n\nfunction App() {\n\n  const routeState = useState<String>(routeStates.GAMELIST)\n  const [route, setRoute] = routeState\n\n  return (\n    <div className=\"App\">\n\n      <Menu routeState={routeState} />\n\n      {route === routeStates.GAMELIST && <GameList setRoute={setRoute}/>}\n      {route === routeStates.GAME && <Game setRoute={setRoute}/>}\n\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbilityTargetsEnum = void 0;\nvar AbilityTargetsEnum;\n(function (AbilityTargetsEnum) {\n    AbilityTargetsEnum[\"ENEMY\"] = \"Enemy\";\n    AbilityTargetsEnum[\"ALLY\"] = \"Ally\";\n})(AbilityTargetsEnum = exports.AbilityTargetsEnum || (exports.AbilityTargetsEnum = {}));\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GameService = void 0;\nvar game_1 = require(\"../gamelogic/game\");\nvar player_1 = require(\"../gamelogic/player\");\nvar GameService = /** @class */ (function () {\n    function GameService(args) {\n        var _this = this;\n        this.initPlayers = function (args) {\n            var _a;\n            (_a = args === null || args === void 0 ? void 0 : args.players) === null || _a === void 0 ? void 0 : _a.map(function (playerstub, idx) { return _this.players[idx] = new player_1.Player(playerstub, idx + 1); });\n        };\n        this.checkCurrentPlayerByID = function (userID) {\n            return userID === _this.game.currentPlayer.userID;\n        };\n        this.dispatchAbility = function (applyingUnit, unitAbility, receivingUnit, receivingUnits) { };\n        this.callApplyAbility = function (applyingUnitID, unitAbilityName, receivingUnitID, receivingUnitIDs) {\n            var applyingUnit = _this.getUnitbyUnitID(applyingUnitID);\n            var unitAbility = applyingUnit.abilities.filter(function (ability) { return ability.name === unitAbilityName; })[0];\n            var receivingUnit = _this.getUnitbyUnitID(receivingUnitID);\n            var receivingUnits = receivingUnitIDs.map(function (receivingUnitID) { return _this.getUnitbyUnitID(receivingUnitID); });\n            return _this.game.applyAbility(applyingUnit, unitAbility, receivingUnit, receivingUnits);\n        };\n        this.createUnitID = function (unit) {\n            return [unit.player.id, unit.id];\n        };\n        this.getUnitbyUnitID = function (unitID) {\n            return _this.game.units.filter(function (unit) { return unit.player.id == unitID[0] && unit.id == unitID[1]; })[0];\n        };\n        this.endGame = function (winner) { var _a; return (_a = _this.gameServiceObserver) === null || _a === void 0 ? void 0 : _a.endGame(winner); };\n        this.players = [];\n        this.initPlayers(args);\n        this.gameServiceObserver = args.gameServiceObserver;\n        this.gameID = (args === null || args === void 0 ? void 0 : args.gameID) || '0';\n        this.game = new game_1.Game({\n            gameService: this,\n            players: this.players,\n        });\n    }\n    return GameService;\n}());\nexports.GameService = GameService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GameStateEnum = void 0;\nvar GameStateEnum;\n(function (GameStateEnum) {\n    GameStateEnum[\"OPEN\"] = \"Open\";\n    GameStateEnum[\"STARTED\"] = \"Started\";\n    GameStateEnum[\"FINISHED\"] = \"Finished\";\n})(GameStateEnum = exports.GameStateEnum || (exports.GameStateEnum = {}));\n;\n"],"sourceRoot":""}