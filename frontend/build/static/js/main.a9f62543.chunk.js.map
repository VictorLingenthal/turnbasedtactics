{"version":3,"sources":["services/gameService.js","gamelogic/game.js","gamelogic/liveUnit.js","gamelogic/player.js","gamelogic/unitModels.js","gamelogic/abilities.js","components/menu.tsx","services/apolloClient.ts","services/unitService.ts","components/unit.tsx","services/clientGameService.ts","components/main.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Object","defineProperty","exports","value","GameService","game_1","require","player_1","_this","this","applyAbility","applyingUnit","unitAbility","recivingUnit","recivingUnits","callApplyAbility","applyingUnitID","unitAbilityName","createUnitID","unit","player","id","getUnitbyUnitID","unitID","game","units","filter","players","Player1","Player2","Game","__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","__esModule","liveUnit_1","args","initializePlayers","map","initializeUnits","playerUnits","unitModels","unitModel","idx","GameUnit","targets","updatedUnits_1","ability","apply","changeTurn","updatedUnits","getUnitsByPlayer","checkForWinner","console","log","switchToNextPlayer","turn","players_left","idxCurrentPlayerInc","indexOf","currentPlayer","idxNextPlayer","name","life","maxlife","abilities","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__","constructor","create","Player","unitModels_1","playerSetup","alive","_super","Knight","Healer","abilities_1","data","Attack","damage","Heal","__assign","assign","t","n","Math","min","Menu","props","className","apolloClient","ApolloClient","cache","InMemoryCache","addTypename","uri","Unit","serverunit","UnitService","getUnits","addUnits","query","gql","then","res","catch","selectedUnit","setSelectedUnit","selectedAbilty","setSelectedAbilty","setTurn","executeAbility","dispatchMyAbility","type","receivingUnit","dispatchEnemyAbility","onClick","e","ClientGameService","mutate","variables","recivingUnitID","recivingUnitIDs","mutation","err","gameservice","receiveAbility","action","useEffect","useReducer","myunits","dispatchMyAbilities","enemyunits","dispatchEnemyAbilities","turnState","useState","selectedUnitState","selectedAbilityState","setSelectedAbility","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a9f62543.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GameService = void 0;\nvar game_1 = require(\"../gamelogic/game\");\nvar player_1 = require(\"../gamelogic/player\");\nvar GameService = /** @class */ (function () {\n    function GameService() {\n        var _this = this;\n        this.applyAbility = function (applyingUnit, unitAbility, recivingUnit, recivingUnits) { return recivingUnits; };\n        this.callApplyAbility = function (applyingUnitID, unitAbilityName, recivingUnit, recivingUnits) { return false; };\n        this.createUnitID = function (unit) {\n            return [unit.player.id, unit.id];\n        };\n        this.getUnitbyUnitID = function (unitID) {\n            return _this.game.units.filter(function (unit) { return unit.player.id == unitID[0] && unit.id == unitID[1]; })[0];\n        };\n        this.players = [new player_1.Player1, new player_1.Player2];\n        this.game = new game_1.Game({\n            players: this.players\n        });\n    }\n    return GameService;\n}());\nexports.GameService = GameService;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nexports.__esModule = true;\nexports.Game = void 0;\nvar liveUnit_1 = require(\"./liveUnit\");\nvar Game = /** @class */ (function () {\n    function Game(args) {\n        var _this = this;\n        this.initializePlayers = function () {\n            return _this.players.map(function (player) { return player.units = _this.initializeUnits(player); });\n        };\n        this.initializeUnits = function (player) {\n            var playerUnits = player.unitModels.map(function (unitModel, idx) { return new liveUnit_1.GameUnit(idx, player, unitModel); });\n            _this.units = __spreadArrays(_this.units, playerUnits);\n            return playerUnits;\n        };\n        this.applyAbility = function (applyingUnit, unitAbility, recivingUnit, recivingUnits) {\n            switch (unitAbility.targets[0]) {\n                case 'Clicked': {\n                    var updatedUnits_1 = unitAbility.ability.apply(applyingUnit, unitAbility, [recivingUnit]);\n                    _this.changeTurn();\n                    return recivingUnits.map(function (unit, idx) { return idx === recivingUnit.id ? updatedUnits_1[0] : unit; });\n                }\n                case 'All_by_Player': {\n                    var updatedUnits = unitAbility.ability.apply(applyingUnit, unitAbility, recivingUnits);\n                    _this.changeTurn();\n                    return updatedUnits;\n                }\n                default: {\n                    _this.changeTurn();\n                    return recivingUnits;\n                }\n            }\n        };\n        this.getUnitsByPlayer = function (player) {\n            return _this.units.filter(function (unit) { return unit.player === player; });\n        };\n        this.changeTurn = function () {\n            if (_this.checkForWinner()) {\n                console.log('TBD: proclaim winner');\n            }\n            else {\n                _this.switchToNextPlayer();\n                _this.turn++;\n            }\n        };\n        this.switchToNextPlayer = function () {\n            var players_left = _this.players.length;\n            var idxCurrentPlayerInc = _this.players.indexOf(_this.currentPlayer) + 1;\n            var idxNextPlayer = players_left === idxCurrentPlayerInc ? 0 : idxCurrentPlayerInc;\n            _this.currentPlayer = _this.players[idxNextPlayer];\n        };\n        this.checkForWinner = function () {\n            console.log('TBD: are there losers?');\n            return false;\n        };\n        this.players = args.players;\n        this.turn = args.turn || 0;\n        this.currentPlayer = args.currentPlayer || args.players[0];\n        this.units = [];\n        this.initializePlayers();\n    }\n    return Game;\n}());\nexports.Game = Game;\n","\"use strict\";\nexports.__esModule = true;\nexports.GameUnit = void 0;\nvar GameUnit = /** @class */ (function () {\n    function GameUnit(id, player, unitModel) {\n        this.id = id;\n        this.player = player;\n        console.log('Live unit');\n        this.name = unitModel.name;\n        this.life = unitModel.maxlife;\n        this.maxlife = unitModel.maxlife;\n        this.abilities = unitModel.abilities;\n    }\n    return GameUnit;\n}());\nexports.GameUnit = GameUnit;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nexports.Player2 = exports.Player1 = exports.Player = void 0;\nvar unitModels_1 = require(\"./unitModels\");\nvar Player = /** @class */ (function () {\n    function Player(playerSetup) {\n        this.name = playerSetup.name;\n        this.id = playerSetup.id;\n        this.unitModels = playerSetup.unitModels;\n        this.units = [];\n        this.alive = true;\n    }\n    return Player;\n}());\nexports.Player = Player;\nvar Player1 = /** @class */ (function (_super) {\n    __extends(Player1, _super);\n    function Player1() {\n        return _super.call(this, {\n            name: \"Player1\",\n            id: 1,\n            unitModels: [unitModels_1.Knight, unitModels_1.Healer],\n            units: [],\n            alive: true\n        }) || this;\n    }\n    return Player1;\n}(Player));\nexports.Player1 = Player1;\nvar Player2 = /** @class */ (function (_super) {\n    __extends(Player2, _super);\n    function Player2() {\n        return _super.call(this, {\n            name: \"Player2\",\n            id: 2,\n            unitModels: [unitModels_1.Knight, unitModels_1.Healer],\n            units: [],\n            alive: true\n        }) || this;\n    }\n    return Player2;\n}(Player));\nexports.Player2 = Player2;\n","\"use strict\";\nexports.__esModule = true;\nexports.Healer = exports.Knight = exports.GameUnit = void 0;\nvar abilities_1 = require(\"./abilities\");\nvar GameUnit = /** @class */ (function () {\n    function GameUnit(data) {\n        this.name = data.name;\n        this.maxlife = data.maxlife;\n        this.abilities = data.abilities;\n    }\n    return GameUnit;\n}());\nexports.GameUnit = GameUnit;\nexports.Knight = {\n    name: 'Knight',\n    maxlife: 50,\n    abilities: [{\n            name: abilities_1.Attack.name,\n            damage: 10,\n            targets: ['Clicked'],\n            ability: abilities_1.Attack\n        }]\n};\nexports.Healer = {\n    name: 'Healer',\n    maxlife: 30,\n    abilities: [{\n            name: abilities_1.Heal.name,\n            damage: 6,\n            targets: ['All_by_Player'],\n            ability: abilities_1.Heal\n        }]\n};\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.Heal = exports.Attack = void 0;\nexports.Attack = {\n    name: 'Attack',\n    targets: ['Enemy'],\n    apply: function (applyingUnit, unitAbility, recivingUnits) { return (recivingUnits.map(function (unit) { return (__assign(__assign({}, unit), { life: Math.min(unit.maxlife, unit.life - unitAbility.damage) })); })); }\n};\nexports.Heal = {\n    name: 'Heal',\n    targets: ['Ally'],\n    apply: function (applyingUnit, unitAbility, recivingUnits) { return (recivingUnits.map(function (unit) { return (__assign(__assign({}, unit), { life: Math.min(unit.maxlife, unit.life + unitAbility.damage) })); })); }\n};\n","import React, { FC, useState } from 'react'\n\nimport './scss/menu.scss'\n\nlet Menu: FC<{\n\n}> = (props) => {\n\n\n  return (\n    <div className=\"Menu\">\n      <ul>\n        <li>Units</li>\n        <li>Battle</li>\n      </ul>\n    </div>\n  )\n}\n\n\nexport default Menu\n","\nimport { ApolloClient, InMemoryCache } from '@apollo/client';\n\n// import { WebSocketLink } from '@apollo/client/link/ws';\n\nexport const apolloClient = new ApolloClient({\n  cache: new InMemoryCache({\n    addTypename: false\n  }),\n  uri: '/graphql',\n});\n\n// const wsLink = new WebSocketLink({\n//   uri: 'ws://localhost:4444/graphql',\n//   options: {\n//     reconnect: true\n//   }\n// });\n","\nimport { gql } from '@apollo/client';\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\n\ntype ServerUnit = {\n  name: string,\n  maxlife: number,\n  // abilities: Ability\n}\n\ninterface IUnit {\n  name: string\n  maxlife: number\n  life: number\n}\n\nclass Unit implements IUnit {\n\n  public name: string\n  public maxlife: number\n  public life: number\n\n  constructor (serverunit:ServerUnit) {\n    this.name = serverunit.name\n    this.life = serverunit.maxlife\n    this.maxlife = serverunit.maxlife\n  }\n\n}\n\nexport interface IUnitService {\n  getUnits(addUnits:Function):Promise<any>\n  initializeUnits(units:ServerUnit[]):IUnit[]\n}\n\nexport class UnitService implements IUnitService {\n\n  private apolloClient:ApolloClient<NormalizedCacheObject>\n\n  constructor (apolloClient:ApolloClient<NormalizedCacheObject>) {\n    this.apolloClient = apolloClient\n  }\n\n  // gets All Units from Server\n  public getUnits = (addUnits:Function):Promise<any> =>\n    this.apolloClient.query({\n        query: gql`{\n            units {\n              name\n              maxlife\n            }\n          }`\n      })\n      .then(res => addUnits(res.data.units as ServerUnit[]))\n      .catch(() => false)\n\n  public initializeUnits = (units:ServerUnit[]):IUnit[] =>\n    units.map(unit => new Unit(unit))\n\n}\n","import React, { FC, useState } from 'react'\n\nimport { IPlayer } from '../gamelogic/player'\nimport { IUnitAbility } from '../gamelogic/unitModels'\nimport { ILiveUnit } from '../gamelogic/liveUnit'\n\nimport './scss/unit.scss'\n\nlet Unit: FC<{\n  unit:ILiveUnit\n  turn:[number,Function]\n  dispatchMyAbility: Function\n  dispatchEnemyAbility: Function\n  selectedAbilty:[IUnitAbility|null,Function]\n  selectedUnit:[ILiveUnit|null,Function]\n}> = (props) => {\n\n  const unit = props.unit\n  const [selectedUnit, setSelectedUnit] = props.selectedUnit\n  const [selectedAbilty, setSelectedAbilty] = props.selectedAbilty\n  const [turn, setTurn] = props.turn\n\n  const executeAbility = () => {\n    if (props.unit.player.id === 1)\n      props.dispatchMyAbility({\n        type: 'apply',\n        applyingUnit: selectedUnit,\n        selectedAbilty: selectedAbilty,\n        receivingUnit: unit\n      })\n    if (props.unit.player.id === 2)\n      props.dispatchEnemyAbility({\n        type: 'apply',\n        applyingUnit: selectedUnit,\n        selectedAbilty: selectedAbilty,\n        receivingUnit: unit\n      })\n    setSelectedUnit(null)\n    setSelectedAbilty(null)\n    setTurn(turn+1)\n  }\n\n  return (\n      <div\n        className={\"Unit\" + (selectedUnit === unit ? \" selectedUnit\": \"\")}\n        onClick={e => {\n            //Check whose turn it is\n            if (turn%2+1 === props.unit.player.id) {\n              if (selectedAbilty && selectedAbilty.ability.targets[0] === 'Ally') {\n                executeAbility()\n              } else {\n                if (selectedUnit === null || props.unit.player.id === selectedUnit.player.id) {\n                  setSelectedUnit(selectedUnit === unit ? null : unit)\n                  setSelectedAbilty(null)\n                }\n                else console.log('no ability selected')\n              }\n            } else {\n              if (selectedUnit) {\n                if (selectedAbilty && selectedAbilty.ability.targets[0] === 'Enemy') {\n                  executeAbility()\n                } else console.log(\"Can't apply to enemy\")\n              } else console.log(\"It's not your unit\")\n            }\n          }\n        }>\n        <h4>{unit.name}</h4>\n        <h6>{unit.life > 0 ? 'Alive' : 'Dead'}</h6>\n        <h6>{props.unit.player.name}</h6>\n        <div>Life: <span>{unit.life > 0? unit.life : 0}</span></div>\n\n      </div>\n  )\n}\n\n\nexport default Unit\n","\nimport { GameService, IGameService } from './gameService'\n\nimport { gql } from '@apollo/client';\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\n\nimport { ILiveUnit } from '../gamelogic/liveUnit'\nimport { IUnitAbility} from '../gamelogic/unitModels'\n\nexport class ClientGameService extends GameService implements IGameService {\n\n  private apolloClient:ApolloClient<NormalizedCacheObject>\n\n  constructor (apolloClient:ApolloClient<NormalizedCacheObject>) {\n    super()\n    this.apolloClient = apolloClient\n  }\n\n  public applyAbility = (applyingUnit:ILiveUnit, unitAbility:IUnitAbility, recivingUnit:ILiveUnit, recivingUnits:ILiveUnit[]):ILiveUnit[] => {\n\n    console.log('ClientGameService - applyAbility')\n    console.log(this.createUnitID(applyingUnit))\n    console.log(unitAbility.ability.name)\n    console.log(this.createUnitID(recivingUnit))\n    console.log(recivingUnits.map(unit => this.createUnitID(unit)))\n\n    this.apolloClient.mutate({\n      variables: {\n        applyingUnitID: this.createUnitID(applyingUnit),\n        unitAbilityName: unitAbility.ability.name,\n        recivingUnitID: this.createUnitID(recivingUnit),\n        recivingUnitIDs: recivingUnits.map(unit => this.createUnitID(unit))\n      },\n      mutation: gql`\n        mutation ApplyAbility(\n          $applyingUnitID: [ID],\n          $unitAbilityName: String,\n          $recivingUnitID: [ID],\n          $recivingUnitIDs: [[ID]]\n        ) {\n          applyAbility(\n            applyingUnitID: $applyingUnitID,\n            unitAbilityName: $unitAbilityName,\n            recivingUnitID: $recivingUnitID,\n            recivingUnitIDs: $recivingUnitIDs\n          )\n        }\n      `\n    })\n    .then(res => console.log(res))\n    .catch(err => console.log(err))\n\n    return this.game.applyAbility(applyingUnit, unitAbility, recivingUnit, recivingUnits)\n  }\n}\n","import React, { FC, useState, useReducer, useEffect } from 'react'\n\nimport './scss/main.scss'\n\nimport { apolloClient } from '../services/apolloClient'\nimport { UnitService } from '../services/unitService'\nimport { IUnitAbility } from '../gamelogic/unitModels'\nimport { ILiveUnit } from '../gamelogic/liveUnit'\nimport Unit from './unit'\n\nimport { ClientGameService } from '../services/clientGameService'\n\nconsole.log('New Game Loading')\n\nconst gameservice = new ClientGameService(apolloClient)\n\nfunction receiveAbility(recivingUnits:ILiveUnit[], action:any):ILiveUnit[] {\n  switch (action.type) {\n    case 'apply' : {\n      return gameservice.applyAbility(action.applyingUnit, action.selectedAbilty, action.receivingUnit, recivingUnits)\n    }\n    default: {\n      return recivingUnits\n    }\n  }\n}\n\n\nlet Menu: FC<{\n\n}> = (props) => {\n\n  useEffect(() => {\n    let unitservice = new UnitService(apolloClient)\n    unitservice.getUnits((unit:ILiveUnit) => console.log(unit))\n  },[])\n\n  const [myunits, dispatchMyAbilities] = useReducer(receiveAbility, gameservice.game?.getUnitsByPlayer(gameservice.game.players[0]));\n  const [enemyunits, dispatchEnemyAbilities] = useReducer(receiveAbility, gameservice.game?.getUnitsByPlayer(gameservice.game.players[1]));\n  const turnState = useState(1)\n  const [turn, setTurn] = turnState\n\n  useEffect(() => {\n    console.log('Update Turn')\n    setTurn(gameservice.game.turn)\n  },[gameservice])\n\n  const selectedUnitState = useState(null)\n  const [selectedUnit, setSelectedUnit] = selectedUnitState\n\n  const selectedAbilityState = useState<IUnitAbility|null>(null)\n  const [selectedAbilty, setSelectedAbility] = selectedAbilityState\n\n  return (\n    <div className=\"Main\">\n      <div className=\"Timer\">Timer</div>\n      <div className=\"Turn\">Turn: {turn} - CurrentPlayer: {turn%2}</div>\n      <div className=\"Battle\">\n        {\n          myunits.map((unit) =>\n            <Unit\n              key={unit.id}\n              unit={unit}\n              turn={turnState}\n              dispatchMyAbility={dispatchMyAbilities}\n              dispatchEnemyAbility={dispatchEnemyAbilities}\n              selectedAbilty={selectedAbilityState}\n              selectedUnit={selectedUnitState}\n            />\n          )\n        }\n        <div className=\"Divider\">vs</div>\n        {\n          enemyunits.map((unit) =>\n            <Unit\n              key={unit.id}\n              unit={unit}\n              turn={turnState}\n              dispatchMyAbility={dispatchMyAbilities}\n              dispatchEnemyAbility={dispatchEnemyAbilities}\n              selectedAbilty={selectedAbilityState}\n              selectedUnit={selectedUnitState}\n            />\n          )\n        }\n\n      </div>\n      <div className=\"Controls\">\n        {\n          selectedUnit?.abilities.map((ability:IUnitAbility) =>\n            <div className={\"Control\" + (selectedAbilty === ability ? ' selected' : '')}\n              onClick={e => {\n                setSelectedAbility(ability)\n              }}\n            >\n            <span>{ability.ability.name}: {ability.damage}</span>\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n\n\nexport default Menu\n","import React from 'react';\n\nimport './App.scss';\nimport Menu from './components/menu'\nimport Main from './components/main'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Menu />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}